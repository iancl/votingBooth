function touchStart(t,e){fingerCount=t.touches.length,1==fingerCount?(startX=t.touches[0].pageX,startY=t.touches[0].pageY,triggerElementID=e):touchCancel(t)}function touchMove(t){console.log("moving"),t.preventDefault(),1==t.touches.length?(curX=t.touches[0].pageX,curY=t.touches[0].pageY):touchCancel(t)}function touchEnd(t){1==fingerCount&&0!=curX?(swipeLength=Math.round(Math.sqrt(Math.pow(curX-startX,2)+Math.pow(curY-startY,2))),swipeLength>=minLength?(caluculateAngle(),determineSwipeDirection(),processingRoutine(),touchCancel(t)):touchCancel(t)):touchCancel(t)}function touchCancel(){fingerCount=0,startX=0,startY=0,curX=0,curY=0,deltaX=0,deltaY=0,horzDiff=0,vertDiff=0,swipeLength=0,swipeAngle=null,swipeDirection=null,triggerElementID=null}function caluculateAngle(){var t=startX-curX,e=curY-startY,n=(Math.round(Math.sqrt(Math.pow(t,2)+Math.pow(e,2))),Math.atan2(e,t));swipeAngle=Math.round(180*n/Math.PI),0>swipeAngle&&(swipeAngle=360-Math.abs(swipeAngle))}function determineSwipeDirection(){swipeDirection=45>=swipeAngle&&swipeAngle>=0?"left":360>=swipeAngle&&swipeAngle>=315?"left":swipeAngle>=135&&225>=swipeAngle?"right":swipeAngle>45&&135>swipeAngle?"down":"up"}function processingRoutine(){document.getElementById(triggerElementID);"down"!=swipeDirection&&"up"!=swipeDirection&&("left"==swipeDirection?left():"right"==swipeDirection&&right())}!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),r=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-r),t),l=u.substring(0,u.indexOf("Animation")).toLowerCase(),a=l&&"-"+l+"-"||"";return h[o]||(f.insertRule("@"+a+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",f.cssRules.length),h[o]=1),o}function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<c.length;i++)if(n=c[i]+e,void 0!==o[n])return n;return void 0!==o[e]?e:void 0}function o(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){this.opts=r(t||{},l.defaults,d)}function a(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}f.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,i){function r(){return o(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function l(t,l,a){e(f,e(o(r(),{rotation:360/i.lines*t+"deg",left:~~l}),e(o(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),n("fill",{color:s(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var a,u=i.length+i.width,c=2*u,h=2*-(i.width+i.length)+"px",f=o(r(),{position:"absolute",top:h,left:h});if(i.shadow)for(a=1;a<=i.lines;a++)l(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=i.lines;a++)l(a);return e(t,f)},l.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var u,c=["webkit","Moz","ms","O"],h={},f=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};l.defaults={},r(l.prototype,{spin:function(e){this.stop();{var n=this,i=n.opts,r=n.el=o(t(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});i.radius+i.length+i.width}if(o(r,{left:i.left,top:i.top}),e&&e.insertBefore(r,e.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!u){var s,l=0,a=(i.lines-1)*(1-i.direction)/2,c=i.fps,h=c/i.speed,f=(1-i.opacity)/(h*i.trail/100),d=h/i.lines;!function p(){l++;for(var t=0;t<i.lines;t++)s=Math.max(1-(l+(i.lines-t)*d)%h*f,i.opacity),n.opacity(r,t*i.direction+a,s,i);n.timeout=n.el&&setTimeout(p,~~(1e3/c))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function l(e,n){return o(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*c+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var a,c=0,h=(r.lines-1)*(1-r.direction)/2;c<r.lines;c++)a=o(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:u&&n(r.opacity,r.trail,h+c*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(a,o(l("#000","0 0 4px #000"),{top:"2px"})),e(i,e(a,l(s(r.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var p=o(t("group"),{behavior:"url(#default#VML)"});return!i(p,"transform")&&p.adj?a():u=i(p,"animation"),l});var MD5=function(t){function e(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}function n(t){var e,n,i="",o="";for(n=0;3>=n;n++)e=t>>>8*n&255,o="0"+e.toString(16),i+=o.substr(o.length-2,2);return i}function i(t){for(var e,n=t.length,i=n+8,o=(i-i%64)/64,r=16*(o+1),s=Array(r-1),l=0,a=0;n>a;)e=(a-a%4)/4,l=a%4*8,s[e]=s[e]|t.charCodeAt(a)<<l,a++;return e=(a-a%4)/4,l=a%4*8,s[e]=s[e]|128<<l,s[r-2]=n<<3,s[r-1]=n>>>29,s}function o(t,e,n,i,o,r,s){return t=f(t,f(f(a(e,n,i),o),s)),f(d(t,r),e)}function r(t,e,n,i,o,r,s){return t=f(t,f(f(u(e,n,i),o),s)),f(d(t,r),e)}function s(t,e,n,i,o,r,s){return t=f(t,f(f(c(e,n,i),o),s)),f(d(t,r),e)}function l(t,e,n,i,o,r,s){return t=f(t,f(f(h(e,n,i),o),s)),f(d(t,r),e)}function a(t,e,n){return e^(t|~n)}function u(t,e,n){return t^e^n}function c(t,e,n){return t&n|e&~n}function h(t,e,n){return t&e|~t&n}function f(t,e){var n,i,o,r,s;return o=2147483648&t,r=2147483648&e,n=1073741824&t,i=1073741824&e,s=(1073741823&t)+(1073741823&e),n&i?2147483648^s^o^r:n|i?1073741824&s?3221225472^s^o^r:1073741824^s^o^r:s^o^r}function d(t,e){return t<<e|t>>>32-e}var p,m,g,v,y,w,C,b,x,A=Array(),E=7,S=12,M=17,L=22,D=5,N=9,R=14,z=20,I=4,T=11,k=16,P=23,q=6,O=10,_=15,B=21;for(t=e(t),A=i(t),w=1732584193,C=4023233417,b=2562383102,x=271733878,p=0;p<A.length;p+=16)m=w,g=C,v=b,y=x,w=l(w,C,b,x,A[p+0],E,3614090360),x=l(x,w,C,b,A[p+1],S,3905402710),b=l(b,x,w,C,A[p+2],M,606105819),C=l(C,b,x,w,A[p+3],L,3250441966),w=l(w,C,b,x,A[p+4],E,4118548399),x=l(x,w,C,b,A[p+5],S,1200080426),b=l(b,x,w,C,A[p+6],M,2821735955),C=l(C,b,x,w,A[p+7],L,4249261313),w=l(w,C,b,x,A[p+8],E,1770035416),x=l(x,w,C,b,A[p+9],S,2336552879),b=l(b,x,w,C,A[p+10],M,4294925233),C=l(C,b,x,w,A[p+11],L,2304563134),w=l(w,C,b,x,A[p+12],E,1804603682),x=l(x,w,C,b,A[p+13],S,4254626195),b=l(b,x,w,C,A[p+14],M,2792965006),C=l(C,b,x,w,A[p+15],L,1236535329),w=s(w,C,b,x,A[p+1],D,4129170786),x=s(x,w,C,b,A[p+6],N,3225465664),b=s(b,x,w,C,A[p+11],R,643717713),C=s(C,b,x,w,A[p+0],z,3921069994),w=s(w,C,b,x,A[p+5],D,3593408605),x=s(x,w,C,b,A[p+10],N,38016083),b=s(b,x,w,C,A[p+15],R,3634488961),C=s(C,b,x,w,A[p+4],z,3889429448),w=s(w,C,b,x,A[p+9],D,568446438),x=s(x,w,C,b,A[p+14],N,3275163606),b=s(b,x,w,C,A[p+3],R,4107603335),C=s(C,b,x,w,A[p+8],z,1163531501),w=s(w,C,b,x,A[p+13],D,2850285829),x=s(x,w,C,b,A[p+2],N,4243563512),b=s(b,x,w,C,A[p+7],R,1735328473),C=s(C,b,x,w,A[p+12],z,2368359562),w=r(w,C,b,x,A[p+5],I,4294588738),x=r(x,w,C,b,A[p+8],T,2272392833),b=r(b,x,w,C,A[p+11],k,1839030562),C=r(C,b,x,w,A[p+14],P,4259657740),w=r(w,C,b,x,A[p+1],I,2763975236),x=r(x,w,C,b,A[p+4],T,1272893353),b=r(b,x,w,C,A[p+7],k,4139469664),C=r(C,b,x,w,A[p+10],P,3200236656),w=r(w,C,b,x,A[p+13],I,681279174),x=r(x,w,C,b,A[p+0],T,3936430074),b=r(b,x,w,C,A[p+3],k,3572445317),C=r(C,b,x,w,A[p+6],P,76029189),w=r(w,C,b,x,A[p+9],I,3654602809),x=r(x,w,C,b,A[p+12],T,3873151461),b=r(b,x,w,C,A[p+15],k,530742520),C=r(C,b,x,w,A[p+2],P,3299628645),w=o(w,C,b,x,A[p+0],q,4096336452),x=o(x,w,C,b,A[p+7],O,1126891415),b=o(b,x,w,C,A[p+14],_,2878612391),C=o(C,b,x,w,A[p+5],B,4237533241),w=o(w,C,b,x,A[p+12],q,1700485571),x=o(x,w,C,b,A[p+3],O,2399980690),b=o(b,x,w,C,A[p+10],_,4293915773),C=o(C,b,x,w,A[p+1],B,2240044497),w=o(w,C,b,x,A[p+8],q,1873313359),x=o(x,w,C,b,A[p+15],O,4264355552),b=o(b,x,w,C,A[p+6],_,2734768916),C=o(C,b,x,w,A[p+13],B,1309151649),w=o(w,C,b,x,A[p+4],q,4149444226),x=o(x,w,C,b,A[p+11],O,3174756917),b=o(b,x,w,C,A[p+2],_,718787259),C=o(C,b,x,w,A[p+9],B,3951481745),w=f(w,m),C=f(C,g),b=f(b,v),x=f(x,y);var X=n(w)+n(C)+n(b)+n(x);return X.toLowerCase()},triggerElementID=null,fingerCount=0,startX=0,startY=0,curX=0,curY=0,deltaX=0,deltaY=0,horzDiff=0,vertDiff=0,minLength=72,swipeLength=0,swipeAngle=null,swipeDirection=null,JSONP=function(){function t(t){var e=document.createElement("script"),i=!1;e.src=t,e.async=!0,e.onload=e.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,e.onload=e.onreadystatechange=null,e&&e.parentNode&&e.parentNode.removeChild(e))},n||(n=document.getElementsByTagName("head")[0]),n.appendChild(e)}function e(e,n,l){i="?",n=n||{};for(o in n)n.hasOwnProperty(o)&&(i+=encodeURIComponent(o)+"="+encodeURIComponent(n[o])+"&");var a="json"+ ++r;return s[a]=function(t){l(t);try{delete s[a]}catch(e){}s[a]=null},t(e+i+"callback="+a),a}var n,i,o,r=0,s=this;return{get:e}}();!function(t,e,n){var o={},r={},s=function(t,e){var n=e;return function(){return n.apply(t,arguments)}},l=function(){var t=Array.prototype.slice.call(arguments,0),e=t.shift(0);for(i in t)e[t[i]]=s(e,e[t[i]]);t=null,e=null},a=Array.prototype.splice,u=Array.prototype.push,c=function(t){var e;for(e=0;e<this.length;e++)t.call(this,e)},h=function(t){var e;for(e in t)this[e]=t[e];e=null},f=function(){r.browser=Array.prototype.slice.call(e.defaultView.getComputedStyle(e.body,"")).join("").match(/(?:-(moz|webkit|ms|khtml)-)/)},d=function(){r.isTouchSupported="ontouchstart"in t},p=function(){var t,e=navigator.userAgent.toLowerCase();r.isMobileDevice=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=/android/i.test(e)?"android":/iphone/i.test(e)?"iphone":/ipad/i.test(e)?"ipad":"other",r.deviceName=t},m=function(){var t=e.querySelector("body");r.supportsClassList="undefined"!=typeof t.classList?!0:!1,t=null},g=function(){f(),d(),p(),m()};o.extend=h,o.debug=!0,o.lib_version="1.5.0",o.lib_creator="Ian Calderon",o.log=function(){this.log.history=this.log.history||[],this.log.history.push(arguments),this.debug&&console.log(Array.prototype.slice.call(arguments))},o.defer=function(t,e){return setTimeout(t,e)},o.getBrowserPrefix=function(){return r.browser},o.supportsTouch=function(){return r.isTouchSupported},o.isMobileDevice=function(){return r.isMobileDevice},o.deviceName=function(){return r.deviceName},o.bindContext=l,g(),function(){var i="queryInstance",s="htmlElement",l="stringObject",h="windowObject",f=function(t,e){return new f.fn.initialize(t,e)},d=function(e){var n;return e instanceof f?n=i:e.nodeName?n=s:"string"==typeof e?n=l:e===t&&(n=h),n},p=function(t,n){var o=d(t),r=[],a="undefined"!=typeof n?n[0]:e;switch(o){case i:r.push(t.getElement());break;case s:case h:r.push(t);break;case l:r=a.querySelectorAll(t)}return r},m=function(t,e){var n=0;return t.splice=a,t.push=u,c.call(e,function(i){var o=e[i],r=d(o);r===s&&(u.call(t,o),n++)}),el=null,t.length=n,t},g=function(t,e){var n,i;return e&&(n=p(e)),i="undefined"!=typeof n?p(t,n):p(t),m(this,i)},v=function(){return c.call(this,function(t){this[t]=null,a.call(this,this[t])}),y.call(this),this},y=function(){var t;for(t in this)this[t]!==a&&(delete this[t],this[t]=null);this.length=0,t=null},w=function(t){var e,n=d(this);return n===i?e=this[0]:n===s&&(e=this),!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},C=function(t){var e;e=t.split(" "),c.call(this,function(t){var n=this[t],i=n.className.split(" ");c.call(e,function(t){var e=this[t];w.call(n,e)||i.push(e)}),n.className=String.prototype.trim.call(i.join(" ")),n=null,i=null})},b=function(t){c.call(this,function(e){var n,i=this[e],o=i.className,r=o.split(" "),s=t.split(" ");c.call(s,function(t){var e=s[t];w.call(i,e)&&(n=new RegExp("(\\s|^)"+e+"(\\s|$)"),o=o.replace(n," "))}),i.className=String.prototype.trim.call(o),r=null,i=null})},x=null,A=function(t){function e(){var e=new Date-n,i=e/t.duration;i>=1&&(i=1),t.progress=i;var o=t.delta(i);t.step(o),1==i&&(clearInterval(x),t.complete())}var n=new Date;x=setInterval(e,t.delay||10)},E=function(){null!==x&&clearInterval(x),x=null};f.fn=f.prototype={constructor:f,initialize:function(t,e){return g.call(this,t,e)},get:function(t){return new f(this.getElement(t))},getElement:function(t){return t=t||0,this[t]},getParent:function(){return new f(this.getElement(0).parentNode)},getAttr:function(t){return this.getElement(0).getAttribute(t)||!1},setAttr:function(t,e){return this.getElement(0).setAttribute(t,e)},removeAttr:function(t){return this.getElement(0).removeAttribute(t)},toArray:function(){var t=[];return this.each(function(e,n){t.push(this.get(n))}),t},each:function(t){var e;for(e=0;e<this.length;e++){var n=this.getElement(e);t.call(this,n,e)}},hasClass:w,addClass:function(t){var e;return t&&(r.supportsClassList?(e=t.split(" "),c.call(this,function(t){var n=this[t];n.classList.add(e),n=null})):C.apply(this,arguments)),this},removeClass:function(t){var e;return t&&(r.supportsClassList?(e=t.split(" "),c.call(this,function(t){var n=this[t];n.classList.remove(e),n=null})):b.apply(this,arguments)),this},setCss:function(t){return c.call(this,function(e){var n=this[e];n.style.cssText+=t,n=null}),this},show:function(e,i){E();var o=this,r=parseFloat(t.getComputedStyle(o.getElement(0)).opacity);r>=1&&(r=1),e===n&&(e=10),o.setCss("display:block;"),A({duration:e,delta:function(t){return t=this.progress},complete:function(){i!==n&&i()},step:function(t){var e=r+t>1?1:r+t;o.setCss("opacity : "+e+";")}})},hide:function(e,i){E();var o=this,r=parseFloat(t.getComputedStyle(o.getElement(0)).opacity);r>=1&&(r=1),e===n&&(e=10),A({duration:e,delta:function(t){return t=this.progress},complete:function(){o.setCss("display:none;"),i!==n&&i()},step:function(t){o.setCss("opacity : "+(r-t)+";")}})},on:function(t,e){return c.call(this,function(n){var i=this[n];i.addEventListener(t,e,!1),i=null}),this},off:function(t,e){return c.call(this,function(n){var i=this[n];i.removeEventListener(t,e),i=null}),this},html:function(t){var e=d(t);e===l?c.call(this,function(e){var n=this[e];n.innerHTML=t,n=null}):e===s?c.call(this,function(e){var n=this[e];n.innerHTML="",n.appendChild(t),n=null}):e===i&&c.call(this,function(e){var n=this[e];n.innerHTML="",n.appendChild(t.getElement()),n=null})},appendHtml:function(t){var e=d(t);e===s?c.call(this,function(e){var n=this[e];n.appendChild(t),n=null}):e===i&&c.call(this,function(e){var n=this[e];n.appendChild(t.getElement()),n=null})},prependHtml:function(t){var e=d(t);e===s?c.call(this,function(e){var n=this[e];n.insertBefore(t,n.childNodes[0]),n=null}):e===i&&c.call(this,function(e){var n=this[e];n.insertBefore(t.getElement(),n.childNodes[0]),n=null})},remove:function(){return c.call(this,function(t){var e=this[t].parentNode,n=this[t];e.removeChild(n),e=null,n=null}),this},destroy:function(){return v.call(this),this}},f.fn.initialize.prototype=f.fn,o.extend({q:f})}(),function(){var t=0,n=function(t){var e=function(){l.apply(this,arguments)};return h.call(e.prototype,this.prototype),h.call(e.prototype,t),e.prototype.super=this.prototype,e.prototype.constructor=this,e.extend=n,e},i=function(e){this.id="view"+t++,this.options=e||{},r.call(this),this.options.parent&&s.call(this),this.children=null,this.setDOMReferences&&this.setDOMReferences(),this.setListeners&&this.setListeners(),this.initialize&&this.initialize()},r=function(t){var n=t||this.viewSelector;this.view&&(this.$view.destroy(),this.$view=null,delete this.$view,this.view=null,delete this.view),n&&(this.$view=o.q(n),this.view=e.querySelector(n))},s=function(){this.parent=null,this.parent=this.options.parent},l=function(){i.apply(this,arguments)};l.prototype={constructor:l,destroy:function(){this.removeDOMReferences&&this.removeDOMReferences(),this.removeListeners&&this.removeListeners(),this.removeElement()},removeDOMReferences:function(){},removeListeners:function(){},setElement:r,setParent:s},l.extend=n,o.extend({ViewController:l})}(),function(){var t={lib_version:"1.1.0",lib_creator:"Ian Calderon"},e={},n=0;t.subscribe=function(t,i,o){var r="keyId"+ ++n;return e[t]||(e[t]=[]),e[t][r]={callback:i,context:o},r},t.publish=function(t,n){if("undefined"!=typeof t){var i,o,r;if(n=n||{},e[t]){i=e[t];for(r in i)o=i[r],o.callback.call(o.context,n),o=null;i=null,r=null}}},t.unsubscribe=function(t,n){e[t]&&e[t][n]&&(e[t][n].callback=null,e[t][n].context=null,delete e[t][n].callback,delete e[t][n].context,e[t][n]=null,delete e[t][n])},t.removePublication=function(t){var n;if(e[t]){for(n in e[t])e[t][n]=null,delete e[t][n];e[t]=null,delete e[t]}n=null},o.extend({Observer:t})}(),function(){var t=0,e=function(){this.lib_creator="Ian Calderon",this.lib_version="1.0",this.id=t++,this.items={},this.length=0};e.prototype={lib_creator:"Ian Calderon",lib_version:"1.0",constructor:e,add:function(t,e){return this.items[t]||(this.items[t]=e,this.length++),this},remove:function(t){return this.items[t]&&(this.items[t]=null,delete this.items[t],this.length--),this},replace:function(t,e){return this.items[t]&&(this.removeItemForKey(t),this.setItemForKey(t,e)),this},get:function(t){return this.items[t]},clear:function(){var t=this;return this.each(function(e,n){t.removeItemForKey(n)}),this.items={},t=null,this},each:function(t){var e;for(e in this.items)t(this.items[e],e);return e=null,this}},o.extend({Collection:e})}(),t.coreJS=c$=o}(this,document);var APP={};!function(t,e,n,i,o){function r(){s=new D}o.contemplateRemovedResults=!1,o.defaultResult={styles:{"background-color":"rgb(28, 184, 65)",color:"yellow","text-shadow":"0 1px 1px rgba(0, 0, 0, 0.2)"},text:" {%} % default",no_votes_text:"no votes yet"},i.userConf=o,i.Classes={},i.author="Ian Calderon",i.version="0.1.3",i.generateCssText=function(t){var e,n,i="";if("undefined"!=typeof t)for(e in t)n=e+":"+t[e]+";",i+=n;return i},i.getObjectSize=function(t){var e,n=0;for(e in t)n++;return n};var s,l,a,u,c,h,f,d="http://viz.saymedia.com/sophie/sophie.php",p=200,m=50,g=!1,v={win:{w:0,h:0}},y=function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o})},w=function(){y(),C()},C=function(){c=new n.Collection,f=new n.Collection,_locked=!1,o.size=size=i.getObjectSize(o.items),l=n.q("#main"),a=n.q("#buttonGroup"),u=n.q("#resultSlide")},b=function(){t.addEventListener("resize",A)},x=function(){var n,i;e.body&&e.body.offsetWidth&&(n=e.body.offsetWidth,i=e.body.offsetHeight),"CSS1Compat"==e.compatMode&&e.documentElement&&e.documentElement.offsetWidth&&(n=e.documentElement.offsetWidth,i=e.documentElement.offsetHeight),t.innerWidth&&t.innerHeight&&(n=t.innerWidth,i=t.innerHeight),v.win.w=n,v.win.h=i},A=function(){x(),E()},E=function(){g===!0?h.setCss("height:"+(v.win.h-6)+"px; margin-top:3px;"):c.each(function(t){t.resize(v.win.h-6)})},S=function(){var t,e,r,s,l=o.items;f.add("results",new n.Collection),s=f.get("results");for(t in l)e=l[t],r=new i.Classes.Button({parent:this,model:e.question,value:t}),a.appendHtml(r.container),c.add(t,r),e.result.votes=0,s.add(t,e.result);s=null,r=null},M=function(){var t=i.generateCssText(o.container.styles);l.setCss(t)},L=function(t,e){var n;switch(t){case"%":n=(100*e/f.get("total")).toFixed(0);break;default:n=e}return n},D=function(){w.apply(this,arguments)};D.prototype={constructor:D,isLocked:!1,initialize:function(){i.Loading.hide({fn:function(){c.each(function(t){t.show()})}})},load:function(){var t=this;S.call(this),M(),b(),n.defer(function(){A(),t.initialize(),t=null},m)},onButtonTapped:function(t){var e=this;this.hideButtons(),n.defer(function(){i.Loading.show({msg:"Loading Results...",fn:function(){g=!0,u.addClass("render")}}),e.postData(t),e=null},p)},hideButtons:function(){c.each(function(t){t.hide()})},postData:function(t){var e=o.question_id;JSONP.get(d,{e:e,h:MD5(e+"merylstreep"),c:t},this.handleRequestResponse.bind(this))},handleRequestResponse:function(t){var e=this;this.buildResultsModel(t),this.buildResultSlide(),n.defer(function(){E(),e.showResultSlide(),e=null},m)},showResultSlide:function(){i.Loading.hide({fn:function(){u.addClass("on")}})},buildResultsModel:function(t){t=t[o.question_id];var e,n,i,r=f.get("results"),s=0;for(e in t)n=parseInt(t[e])||0,i=r.get(e),i||o.contemplateRemovedResults===!0&&(i=o.defaultResult,r.add(e,i)),i&&(i.votes=n,s+=n),i=null;f.add("total",s),r=null},buildResultSlide:function(){var t,r,s,l,a,c,d,p=f.get("results");p.each(function(n){t=/{([^}]+)}/g,r=t.exec(n.text),s=r[1],l=L(s,n.votes),a=e.createElement("div"),c=e.createElement("div"),a.className="item",d=0===parseInt(l)&&n.no_votes_text?n.no_votes_text:n.text.replace(r[0],l),a.innerHTML="<span>"+d+"</span>",a.style.cssText=i.generateCssText(n.styles),c.className="item-parent pure-u-1-"+o.size,c.appendChild(a),u.appendHtml(c),c=null,a=null}),h=n.q(".item")}},i.load=function(){s.load()},t.addEventListener("load",r)}(this,document,c$,APP,APP_CONF,Spinner),function(t,e,n,i,o){var r,s,l,a=200,u=200,c="on",h="render",f=function(t){this.conf=t||{},l=!1,t.spinnerColor=t.spinnerColor||"#fff",t.bgColor=t.bgColor||"rgba(0,0,0,0.7)",r=n.q("#loadingOverlay"),r.setCss("background-color:"+t.bgColor+";"),s=new o({length:10,width:4,radius:10,color:t.spinnerColor,top:"50%",left:"50%"}),l=!0,d()},d=function(){s.spin(r.getElement())},p=function(){s.stop()},m=function(){f.apply(this,arguments)};m.prototype={constructor:m,show:function(t){t=t||{},l!==!0&&(l=!0,r.addClass(h),n.defer(function(){d(),r.addClass(c)},50),n.defer(function(){t.fn&&t.fn()},a))},hide:function(t){l!==!1&&this.conf.test!==!0&&(t=t||{},n.defer(function(){r.removeClass(c)},u),n.defer(function(){r.removeClass(h),p(),l=!1,t.fn&&t.fn()},a+u))},isVisible:function(){return l}},i.Loading=new m(i.userConf.loader)}(this,document,c$,APP,Spinner),function(t,e,n,i){var o=function(t){this.model=t.model,this.parent=t.parent,this.value=t.value,r.call(this),this.initialize()},r=function(){var t=e.createElement("a"),o=e.createElement("div");t.className="button pure-button hide",t.innerHTML="<span>"+this.model.text+"</span>",t.style.cssText=i.generateCssText(this.model.styles),t.setAttribute("data-value",this.value),o.className="btn-parent pure-u-1-"+i.userConf.size,o.appendChild(t),this.el=n.q(t),this.container=n.q(o),t=null,o=null},s=function(){o.apply(this,arguments)};s.prototype={constructor:s,initialize:function(){this.el.on("click",this.buttonTapped.bind(this))},resize:function(t){this.el.setCss("height:"+t+"px; margin-top:3px;")},show:function(){this.el.removeClass("hide")},hide:function(){this.el.addClass("hide")},buttonTapped:function(){this.parent.onButtonTapped(this.value)}},i.Classes.Button=s}(this,document,c$,APP);